<?xml version="1.0" encoding="UTF-8"?>
<segment name='chapter'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
MkSTSequence
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
MkSTSequence
]]>
</field> <!-- title_src -->
<field name='label'>
ch:st-seq
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<segment name='cluster'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
grp:grm:st-seq::implements
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<atom name='gram'>
<field name='pl'>
...NOT.PROVIDED.PL...
</field> <!-- pl -->
<field name='pl_version'>
...NOT.PROVIDED.PL_VERSION...
</field> <!-- pl_version -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='cover'>
...NOT.PROVIDED.COVER...
</field> <!-- cover -->
<field name='sound'>
...NOT.PROVIDED.SOUND...
</field> <!-- sound -->
<field name='label'>
grm:st-seq::implements
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='body'>
<![CDATA[
<p>Implements single-threaded sequences with an underlying mutable array and a history. Every single-threaded sequence is either <em>current</em> or <em>old</em>, depending upon whether or not it has ever been updated. When a single-threaded sequence is current, updates can proceed efficiently on the mutable array, returning a new single-threaded sequence which is current, and modifying the original sequence to be <em>old</em>. When a single-threaded sequence is old, all operations are expensive, and are not considered by the cost semantics given below. In particular, they must build a new array from the history, which costs at least as much as the size of the history.</p>
<p>As long as operations are always performed on a current single-threaded sequence, they are efficient.</p>
<pre><code>functor MkSTSequence (structure Seq : SEQUENCE) :&gt; ST_SEQUENCE where Seq = Seq  </code></pre>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
\label{ch:st-seq}
\begin{preamble}
Implements single-threaded sequences with an underlying mutable array and a
history.
Every single-threaded sequence is either \emph{current} or \emph{old},
depending upon whether or not it has ever been updated.
When a single-threaded sequence is current, updates can proceed efficiently
on the mutable array, returning a new single-threaded sequence which is
current, and modifying the original sequence to be \emph{old}.
When a single-threaded sequence is old, all operations are expensive, and
are not considered by the cost semantics given below. In particular, they
must build a new array from the history, which costs at least as much as the
size of the history.

As long as operations are always performed on a current
single-threaded sequence, they are efficient.
\begin{verbatim}
functor MkSTSequence (structure Seq : SEQUENCE) :> ST_SEQUENCE where Seq = Seq
\end{verbatim}
\end{preamble}
]]>
</field> <!-- body_src -->

<field name='caption'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption -->
<field name='caption_src'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption_src -->
</atom> <!-- gram -->

</segment> <!-- cluster -->


<segment name='section'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
Cost Specification
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Cost Specification
]]>
</field> <!-- title_src -->
<field name='label'>
sec:st-seq::cost-specification
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<segment name='cluster'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
grp:grm:st-seq::costs
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<atom name='gram'>
<field name='pl'>
...NOT.PROVIDED.PL...
</field> <!-- pl -->
<field name='pl_version'>
...NOT.PROVIDED.PL_VERSION...
</field> <!-- pl_version -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='cover'>
...NOT.PROVIDED.COVER...
</field> <!-- cover -->
<field name='sound'>
...NOT.PROVIDED.SOUND...
</field> <!-- sound -->
<field name='label'>
grm:st-seq::costs
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='body'>
<![CDATA[
<p>The following costs assume that all single-threaded sequences are a current version.</p>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
The following costs assume that all single-threaded sequences are a current
version.
]]>
</field> <!-- body_src -->

<field name='caption'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption -->
<field name='caption_src'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption_src -->
</atom> <!-- gram -->

</segment> <!-- cluster -->

<segment name='cluster'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
grp:cst:st-seq::indexing
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<atom name='costspec'>
<field name='pl'>
...NOT.PROVIDED.PL...
</field> <!-- pl -->
<field name='pl_version'>
...NOT.PROVIDED.PL_VERSION...
</field> <!-- pl_version -->
<field name='title'>
<![CDATA[
Indexing
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Indexing
]]>
</field> <!-- title_src -->
<field name='cover'>
...NOT.PROVIDED.COVER...
</field> <!-- cover -->
<field name='sound'>
...NOT.PROVIDED.SOUND...
</field> <!-- sound -->
<field name='label'>
cst:st-seq::indexing
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='body'>
<![CDATA[
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{nth}~s~i\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{nth}~s~i$ & $\bigoh{1}$ & $\bigoh{1}$
\end{tabular}
]]>
</field> <!-- body_src -->

<field name='caption'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption -->
<field name='caption_src'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption_src -->
</atom> <!-- costspec -->

</segment> <!-- cluster -->

<segment name='cluster'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
grp:cst:st-seq::updates
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<atom name='costspec'>
<field name='pl'>
...NOT.PROVIDED.PL...
</field> <!-- pl -->
<field name='pl_version'>
...NOT.PROVIDED.PL_VERSION...
</field> <!-- pl_version -->
<field name='title'>
<![CDATA[
Updates
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Updates
]]>
</field> <!-- title_src -->
<field name='cover'>
...NOT.PROVIDED.COVER...
</field> <!-- cover -->
<field name='sound'>
...NOT.PROVIDED.SOUND...
</field> <!-- sound -->
<field name='label'>
cst:st-seq::updates
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='body'>
<![CDATA[
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{update}~(s,(i,x))\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\texttt{inject}~(s,u)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({|u|}\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{update}~(s,(i,x))$ & $\bigoh{1}$ & $\bigoh{1}$ \\
$\sml{inject}~(s,u)$ & $\bigoh{|u|}$ & $\bigoh{1}$
\end{tabular}
]]>
</field> <!-- body_src -->

<field name='caption'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption -->
<field name='caption_src'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption_src -->
</atom> <!-- costspec -->

</segment> <!-- cluster -->

<segment name='cluster'>
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
grp:cst:st-seq::conversion
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->

<atom name='costspec'>
<field name='pl'>
...NOT.PROVIDED.PL...
</field> <!-- pl -->
<field name='pl_version'>
...NOT.PROVIDED.PL_VERSION...
</field> <!-- pl_version -->
<field name='title'>
<![CDATA[
Conversion
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Conversion
]]>
</field> <!-- title_src -->
<field name='cover'>
...NOT.PROVIDED.COVER...
</field> <!-- cover -->
<field name='sound'>
...NOT.PROVIDED.SOUND...
</field> <!-- sound -->
<field name='label'>
cst:st-seq::conversion
</field> <!-- label -->
<field name='depend'>
...NOT.PROVIDED.DEPEND...
</field> <!-- depend -->
<field name='point_value'>
0.0
</field> <!-- point_value -->
<field name='body'>
<![CDATA[
<p>The following costs assume <span class="math inline">\(\texttt{Seq} = \texttt{ArraySequence}\)</span>.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{fromSeq}~s\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({|s|}\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\texttt{toSeq}~s\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({|s|}\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(O\left({1}\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
The following costs assume $\sml{Seq} = \sml{ArraySequence}$.
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{fromSeq}~s$ & $\bigoh{|s|}$ & $\bigoh{1}$ \\
$\sml{toSeq}~s$ & $\bigoh{|s|}$ & $\bigoh{1}$
\end{tabular}
]]>
</field> <!-- body_src -->

<field name='caption'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption -->
<field name='caption_src'>
<![CDATA[
...NOT.PROVIDED.CAPTION...
]]>
</field> <!-- caption_src -->
</atom> <!-- costspec -->

</segment> <!-- cluster -->


</segment> <!-- section -->

</segment> <!-- chapter -->
