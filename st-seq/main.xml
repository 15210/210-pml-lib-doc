<?xml version="1.0" encoding="UTF-8"?>
<block name='chapter'>
<field name='title'>
<![CDATA[
MkSTSequence
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
MkSTSequence
]]>
</field> <!-- title_src -->
<field name='label'>
ch:st-seq
</field> <!-- label -->
<atom name='preamble'>
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<field name='body'>
<![CDATA[
<p>Implements single-threaded sequences with an underlying mutable array and a history. Every single-threaded sequence is either <em>current</em> or <em>old</em>, depending upon whether or not it has ever been updated. When a single-threaded sequence is current, updates can proceed efficiently on the mutable array, returning a new single-threaded sequence which is current, and modifying the original sequence to be <em>old</em>. When a single-threaded sequence is old, all operations are expensive, and are not considered by the cost semantics given below. In particular, they must build a new array from the history, which costs at least as much as the size of the history.</p>
<p>As long as operations are always performed on a current single-threaded sequence, they are efficient.</p>
<pre><code>functor MkSTSequence (structure Seq : SEQUENCE) :&gt; ST_SEQUENCE where Seq = Seq  </code></pre>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
Implements single-threaded sequences with an underlying mutable array and a
history.
Every single-threaded sequence is either \emph{current} or \emph{old},
depending upon whether or not it has ever been updated.
When a single-threaded sequence is current, updates can proceed efficiently
on the mutable array, returning a new single-threaded sequence which is
current, and modifying the original sequence to be \emph{old}.
When a single-threaded sequence is old, all operations are expensive, and
are not considered by the cost semantics given below. In particular, they
must build a new array from the history, which costs at least as much as the
size of the history.

As long as operations are always performed on a current
single-threaded sequence, they are efficient.
\begin{verbatim}
functor MkSTSequence (structure Seq : SEQUENCE) :> ST_SEQUENCE where Seq = Seq
\end{verbatim}
]]>
</field> <!-- body_src -->
</atom> <!-- preamble -->

<block name='section'>
<field name='title'>
<![CDATA[
Cost Specification
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Cost Specification
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<atom name='gram'>
<field name='title'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
...NOT.PROVIDED.TITLE...
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<field name='body'>
<![CDATA[
<p>The following costs assume that all single-threaded sequences are a current version.</p>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
The following costs assume that all single-threaded sequences are a current
version.
]]>
</field> <!-- body_src -->
</atom> <!-- gram -->
<atom name='costspec'>
<field name='title'>
<![CDATA[
Indexing
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Indexing
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<field name='body'>
<![CDATA[
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{nth}~s~i\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{nth}~s~i$ & $\bigO 1$ & $\bigO 1$
\end{tabular}
]]>
</field> <!-- body_src -->
</atom> <!-- costspec -->
<atom name='costspec'>
<field name='title'>
<![CDATA[
Updates
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Updates
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<field name='body'>
<![CDATA[
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{update}~(s,(i,x))\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\texttt{inject}~(s,u)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(|u|\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{update}~(s,(i,x))$ & $\bigO 1$ & $\bigO 1$ \\
$\sml{inject}~(s,u)$ & $\bigO{|u|}$ & $\bigO 1$
\end{tabular}
]]>
</field> <!-- body_src -->
</atom> <!-- costspec -->
<atom name='costspec'>
<field name='title'>
<![CDATA[
Conversion
]]>
</field> <!-- title -->
<field name='title_src'>
<![CDATA[
Conversion
]]>
</field> <!-- title_src -->
<field name='label'>
...NOT.PROVIDED.LABEL...
</field> <!-- label -->
<field name='body'>
<![CDATA[
<p>The following costs assume <span class="math inline">\(\texttt{Seq} = \texttt{ArraySequence}\)</span>.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>Work</strong></td>
<td style="text-align: center;"><strong>Span</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\texttt{fromSeq}~s\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(|s|\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\texttt{toSeq}~s\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(|s|\right)\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\mathop{O}\left(1\right)\)</span></td>
</tr>
</tbody>
</table>
]]>
</field> <!-- body -->
<field name='body_src'>
<![CDATA[
The following costs assume $\sml{Seq} = \sml{ArraySequence}$.
\begin{tabular}{ccc}
& \textbf{Work} & \textbf{Span} \\
$\sml{fromSeq}~s$ & $\bigO{|s|}$ & $\bigO 1$ \\
$\sml{toSeq}~s$ & $\bigO{|s|}$ & $\bigO 1$
\end{tabular}
]]>
</field> <!-- body_src -->
</atom> <!-- costspec -->


</block> <!-- section -->

</block> <!-- chapter -->
